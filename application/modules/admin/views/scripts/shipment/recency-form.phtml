<?php

$possibleResults = '<select name="possibleResults[]" class="isRequired form-control input-sm"><option value="">--Select--</option>';
foreach ($this->recencyPossibleResults as $pr) {
	$possibleResults .= '<option value="' . $pr['id'] . '">' . $pr['response'] . '</option>';
}

$possibleResults .= "</select>";

?>

<table style="width: 100%;margin: 0 auto;" border="1" class="table table-bordered table-striped clearfix" id="vlSampleTable">
	<thead>
		<tr align="center">
			<th style="width:20%;text-align: center;">Control/Sample</th>
			<th style="width:22%;text-align: center;">Final Result</th>
			<th style="width:10%;text-align: center;">Control Line</th>
			<th style="width:10%;text-align: center;">Verification Line</th>
			<th style="width:10%;text-align: center;">Longterm Line</th>
			<th style="width:10%;text-align: center;">Control ?</th>
			<th style="width:10%;text-align: center;">Mandatory ?</th>
			<th style="width:13%;text-align: center;">Add/Remove Row</th>
		</tr>
	</thead>
	<tbody>

		<tr align="center">
			<td style="text-align: center">
				<input type="text" name="sampleName[]" class="isRequired input-sm form-control" title="Please enter sample name here" placeholder="Please enter sample name here" />
			</td>
			<td>
				<?php echo $possibleResults; ?>
			</td>
			<td>
				<select name="controlLine[]" class="isRequired form-control input-sm" title="Please choose control line">
					<option value="">--Select--</option>
					<option value="present">Present</option>
					<option value="absent">Absent</option>
				</select>
			</td>
			<td>
				<select name="verificationLine[]" class="isRequired form-control input-sm" title="Please choose verification line">
					<option value="">--Select--</option>
					<option value="present">Present</option>
					<option value="absent">Absent</option>
				</select>
			</td>
			<td>
				<select name="longtermLine[]" class="isRequired form-control input-sm" title="Please choose Longterm line">
					<option value="">--Select--</option>
					<option value="present">Present</option>
					<option value="absent">Absent</option>
				</select>
			</td>
			<td>
				<select name="control[]" class="isRequired controlOrNot form-control input-sm" title="Please choose whether this sample is a control">
					<option value="">--Select--</option>
					<option value="1">Yes</option>
					<option value="0">No</option>
				</select>
			</td>
			<td>
				<select name="mandatory[]" class="isRequired form-control input-sm" title="Please choose whether this sample/control is mandatory">
					<option value="">--Select--</option>
					<option value="1">Yes</option>
					<option value="0">No</option>
				</select>
			</td>
			<td>
				<a href="javascript:void(0);" onclick="addRecencyRow(this);" class="btn btn-xs btn-info"><i class="icon-plus"></i></a>
			</td>
		</tr>
	</tbody>
</table>
<br>

<script type="text/javascript">
	
	function addRecencyRow(obj) {
		$(obj.parentNode.parentNode).after('<tr align="center">\
			<td style="text-align: center">\
				<input type="text" name="sampleName[]" class="isRequired input-sm form-control" title="Please enter sample name here" placeholder="Please enter sample name here" />\
			</td>\
			<td>\
				<?php echo $possibleResults; ?>\
			</td>\
			<td>\
				<select name="controlLine[]" class="isRequired form-control input-sm" title="Please choose control line">\
					<option value="">--Select--</option>\
					<option value="present">Present</option>\
					<option value="absent">Absent</option>\
				</select>\
			</td>\
			<td>\
				<select name="verificationLine[]" class="isRequired form-control input-sm" title="Please choose verification line">\
					<option value="">--Select--</option>\
					<option value="present">Present</option>\
					<option value="absent">Absent</option>\
				</select>\
			</td>\
			<td>\
				<select name="longtermLine[]" class="isRequired form-control input-sm" title="Please choose Longterm line">\
					<option value="">--Select--</option>\
					<option value="present">Present</option>\
					<option value="absent">Absent</option>\
				</select>\
			</td>\
			<td>\
				<select name="control[]" class="isRequired controlOrNot form-control input-sm" title="Please choose whether this sample is a control">\
					<option value="">--Select--</option>\
					<option value="1">Yes</option>\
					<option value="0">No</option>\
				</select>\
			</td>\
			<td>\
				<select name="mandatory[]" class="isRequired form-control input-sm" title="Please choose whether this sample/control is mandatory">\
					<option value="">--Select--</option>\
					<option value="1">Yes</option>\
					<option value="0">No</option>\
				</select>\
			</td>\
			<td>\
				<a href="javascript:void(0);" onclick="addRecencyRow(this);" class="btn btn-xs btn-info"><i class="icon-plus"></i></a>\
				<a  href="javascript:void(0);" onclick="removeRow(this)" class="btn btn-xs btn-danger"  title="Remove this row completely" alt="Remove this row completely"><i class="icon-minus"></i></a> \
			</td>\
		</tr>');
	}

	function removeRow(obj) {
		$(obj.parentNode.parentNode).fadeOut("normal", function() {
			$(this).remove();
		});
	}
</script>